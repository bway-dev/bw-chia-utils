#! /usr/bin/env node
const fs = require("fs");
const dotenv = require("dotenv");
dotenv.config();
const plot_log_folder = process.env.PLOT_LOG_FOLDER;

const a = [
  "Multi-threaded pipelined Chia k32 plotter - 08d5322",
  "Network Port: 8444",
  "Final Directory: /media/user/diskx/plots/",
  "Number of Plots: 1",
  "Crafting plot 1 out of 1 (2022/01/12 19:17:11)",
  "Process ID: 57016",
  "Number of Threads: 24",
  "Number of Buckets P1:    2^8 (256)",
  "Number of Buckets P3+P4: 2^8 (256)",
  "Pool Puzzle Hash:  fakesisotenq3gy54s2j228rfyc3vevwxdh6p1zh8pghy1uts15r9k12bndfup35",
  "Farmer Public Key: fake23eyrjcej61ucov4kn82p959ckodsir4dcnugo5dcj2b2zev1dmfzedq0d2rpszpadoj6bznd0jn9xzjz5t37eu9tzc0",
  "Working Directory:   /media/user/plotter2/",
  "Working Directory 2: /media/user/plotter2/",
  "Plot Name: plot-k32-2022-02-07-13-54-fakef6quopm1oa6bye6f7ry9l25ws3ewcbxobkhrfu4jyc3ywyt1r9ntb5fm5e9q",
  "[P1] Table 1 took 30.9328 sec",
  "Progress update: 0.01",
  "[P1] Table 2 took 180.381 sec, found 4295027256 matches",
  "Progress update: 0.06",
  "[P1] Table 3 took 239.282 sec, found 4295080810 matches",
  "Progress update: 0.12",
  "[P1] Table 4 took 230.546 sec, found 4295132433 matches",
  "Progress update: 0.2",
  "[P1] Table 5 took 241.591 sec, found 4295223576 matches",
  "Progress update: 0.28",
  "[P1] Table 6 took 216.563 sec, found 4295297998 matches",
  "Progress update: 0.36",
  "[P1] Table 7 took 176.603 sec, found 4295253846 matches",
  "Progress update: 0.42",
  "Phase 1 took 1415.98 sec",
  "[P2] max_table_size = 4295297998",
  "[P2] Table 7 scan took 27.105 sec",
  "[P2] Table 7 rewrite took 85.441 sec, dropped 0 entries (0 %)",
  "Progress update: 0.43",
  "[P2] Table 6 scan took 54.8596 sec",
  "[P2] Table 6 rewrite took 60.2895 sec, dropped 581495657 entries (13.538 %)",
  "Progress update: 0.48",
  "[P2] Table 5 scan took 52.3995 sec",
  "[P2] Table 5 rewrite took 56.7771 sec, dropped 762166047 entries (17.7445 %)",
  "Progress update: 0.51",
  "[P2] Table 4 scan took 50.6596 sec",
  "[P2] Table 4 rewrite took 54.1947 sec, dropped 828945779 entries (19.2997 %)",
  "Progress update: 0.55",
  "[P2] Table 3 scan took 52.6826 sec",
  "[P2] Table 3 rewrite took 55.7874 sec, dropped 855153703 entries (19.9101 %)",
  "Progress update: 0.58",
  "[P2] Table 2 scan took 51.9724 sec",
  "[P2] Table 2 rewrite took 54.2398 sec, dropped 865635270 entries (20.1544 %)",
  "Progress update: 0.61",
  "Phase 2 took 713.352 sec",
  "Wrote plot header with 252 bytes",
  "[P3-1] Table 2 took 55.1039 sec, wrote 3429391986 right entries",
  "[P3-2] Table 2 took 52.4123 sec, wrote 3429391986 left entries, 3429391986 final",
  "Progress update: 0.66",
  "[P3-1] Table 3 took 73.5292 sec, wrote 3439927107 right entries",
  "[P3-2] Table 3 took 50.5166 sec, wrote 3439927107 left entries, 3439927107 final",
  "Progress update: 0.73",
  "[P3-1] Table 4 took 70.2063 sec, wrote 3466186654 right entries",
  "[P3-2] Table 4 took 66.7251 sec, wrote 3466186654 left entries, 3466186654 final",
  "Progress update: 0.79",
  "[P3-1] Table 5 took 76.0657 sec, wrote 3533057529 right entries",
  "[P3-2] Table 5 took 79.7954 sec, wrote 3533057529 left entries, 3533057529 final",
  "Progress update: 0.85",
  "[P3-1] Table 6 took 85.5477 sec, wrote 3713802341 right entries",
  "[P3-2] Table 6 took 74.1735 sec, wrote 3713802341 left entries, 3713802341 final",
  "Progress update: 0.92",
  "[P3-1] Table 7 took 86.6498 sec, wrote 4295253846 right entries",
  "[P3-2] Table 7 took 75.604 sec, wrote 4294967296 left entries, 4294967296 final",
  "Progress update: 0.98",
  "Phase 3 took 852.257 sec, wrote 21877332913 entries to final plot",
  "[P4] Starting to write C1 and C3 tables",
  "[P4] Finished writing C1 and C3 tables",
  "[P4] Writing C2 table",
  "[P4] Finished writing C2 table",
  "Phase 4 took 148.438 sec, final plot size is 108826249538 bytes",
  "Total plot creation time was 3001.2 sec (50.02 min)",
  "Started copy to /media/user/diskx/plots/plot-k32-2022-02-07-13-54-fakef6quopm1oa6bye6f7ry9l25ws3ewcbxobkhrfu4jyc3ywyt1r9ntb5fm5e9q.plot",
  "Renamed final plot to /media/user/diskx/plots/plot-k32-2022-02-07-13-54-fakef6quopm1oa6bye6f7ry9l25ws3ewcbxobkhrfu4jyc3ywyt1r9ntb5fm5e9q.plot",
];

a.forEach((element, index) => {
  setTimeout(function () {
    // log.write(element) + "\n";
    fs.appendFile(
      plot_log_folder + "/plots.log",
      `${element}\n`,
      function () {}
    );
  }, 30 * index);
});
